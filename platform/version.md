## 版本号

对于版本号，我们要求遵守语义化版本号，即版本格式：主版本号.次版本号.修订号，版本号递增规则如下：

1. 主版本号：当你做了不兼容的 API 修改，
2. 次版本号：当你做了向下兼容的功能性新增，
3. 修订号：当你做了向下兼容的问题修正。

## APP版本号

APP版本号中，我们对主版本号和次版本号的含义做一些修改，以适应APP版本发布的特点 ：

* 主版本号 ： 整体的架构变动，或者整体的APP风格的变更。建议主版本号的更新频率为1-3年一次。
* 次版本号 ： 常规APP版本的升级，修改次版本号。
* 修订号： 为修复BUG的版本。

我们觉得这样的APP版本号规定，可以使APP版本号的递增更加好看，版本号也清晰合理。

## 组件版本号

组件版本号，我们就要严格按照语义化版本来处理。

路由、事件、数据这些内容就是`API`， 当添加这些内容时，我们认为发生了向下兼容的功能性新增，以提升次版本号。

变更这些API时，则是不兼容的API修改。 

但是我们要对组件的API变更做以下的补充限定 ：

1. 不支持接口的修改，只支持接口的增加与删除。（一个底层的API的修改，就意味着所以依赖组件都需要重新打包，这种操作一定要避免。）
2. 接口的删除必须要先标明 `接口废弃` ,然后经过3个以上版本，才可以进行删除。
3. 接口的稳定性和版本的变更情况，也是组件的稳定性的重要评价之一。（如果组件的主版本号频繁变更，频繁发生不兼容的升级，则可以认为这个组件的API设定有一定的问题，需要进行整改）

通过强硬的规则，来约束组件开发者，提高组件版本的稳定性，避免接口混乱。

## 组件的发布版本与开发版本

对于组件的版本，我们还要考虑开发版本与发布版本的区别：

* 开发版本： 开发测试阶段的使用开发版本，即`0.0.1-beta`， 使用`pre-release`来处理开发阶段的版本变更。
* 发布版本 ： 最终发布的版本号，即上诉讨论的正常版本号。

在开发阶段，尽管自测完成了，但是在测试阶段可能会进行BUG修复以及需求变更，但是这些变更依然属于这个组件版本的内容。 所以我们使用开发版本，来解决开发阶段的版本变更问题。

在我们的组件化开发管理平台中，自动实现了开发版本与发布版本的切换，这里简单介绍一下：

1. 当我们接入版本时，使用的是`0.0.1`的组件版本，APP会记录这个版本信息。
2. 开发阶段时，使用 `fastlane axe_pod_install production:false`, 以安装组件的开发版本
3. 发布阶段，使用 `fastlane axe_pod_install production:true`, 以安装组件的发布版本

开发阶段的开发版本，会从 `0.0.1-beta.0` 升到`0.0.1-beta.10` ，由于使用 ：
	
	pod 'Ground/release' , '>= 0.0.1-beta.0', '< 0.0.1'
	
这种形式的依赖，所以每次安装时，会自动下载最新版本的开发版本。

## pod的版本依赖

我们规定，所有的`pod`依赖，都使用指定版本（上诉的组件开发版本是自动管理的，所以属于特殊情况），且只保留`Podfile`文件，不保留`Podfile.lock`文件。

组件化管理平台，提供了对依赖的自动分析，用于了解整个APP的依赖结构。

	